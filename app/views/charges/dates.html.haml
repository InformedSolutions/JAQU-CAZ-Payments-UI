= link_to 'Back', daily_charge_charges_path, class: 'govuk-back-link'

%main.govuk-main-wrapper#main-content{role: 'main'}
  .govuk-grid-row
    .govuk-grid-column-two-thirds
      - if alert
        .govuk-error-summary{'aria-labelledby': 'error-summary-title',
                             'data-module': 'govuk-error-summary',
                             role: 'alert',
                             tabindex: '-1'}
          %h2#error-summary-title.govuk-error-summary__title
            There is a problem
          .govuk-error-summary__body
            %ul.govuk-list.govuk-error-summary__list
              %li
                %a{href: '#confirmation-error', id: 'error-summary'}
                  Select a date that you wish to pay for
      %h1.govuk-heading-l Which days do you want to pay for?
      %p
        A daily charge period runs from midnight to midnight.
      %details.govuk-details{'data-module': 'govuk-details'}
        %summary.govuk-details__summary
          %span.govuk-details__summary-text
            Why can't I see my date?
        .govuk-details__text
          %p
            You can't pay for more than 7 days ahead.
          %p
            You have to pay the charge by midnight on the next working day after you have driven in
            a zone. If the payment window has closed you won't be able to pay here, and you will be
            sent a fine in the post. This will be sent to the address the DVLA holds for the
            vehicle's owner.
      = form_tag confirm_dates_charges_path, method: :post do
        .govuk-form-group{class: ('govuk-form-group--error' if alert)}
          %fieldset.govuk-fieldset
            %legend.govuk-fieldset__legend.govuk-fieldset__legend--l
            - if alert
              %span#confirmation-error.govuk-error-message
                %span.govuk-visually-hidden Error:
                Select a date that you wish to pay for
            .govuk-checkboxes
              - @dates.each_with_index do |date, index|
                .govuk-checkboxes__item
                  %input.govuk-checkboxes__input{name: 'dates[]',
                                                 type: 'checkbox',
                                                 value: date[:value],
                                                 id: "date-#{index}"}
                  %label.govuk-label.govuk-checkboxes__label{for: "date-#{index}"}
                    - if date[:value] == Date.current.strftime('%F')
                      %b
                        = date[:name]
                      (Today)
                    - else
                      = date[:name]
        = submit_tag 'Continue', class: 'govuk-button', 'data-module': 'govuk-button'
